<div class="panel-body" ng-controller="WhatIfCtrl">
    <div class="row">
        <div class="col-sm-9">
            <table class="table agora-table table-striped table-condensed">
                <thead>
                    <tr>
                        <th></th>
                        <th class="orange">Security</th>
                        <th class="orange">Quantity</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="pos in positions">
                        <td style="color: #99CCFF;font-weight: bold;">{{$index + 1}}</td>
                        <td>
                            <input type="text" ng-model="pos.ticker" capitalize>
                        </td>
                        <td>
                            <input ng-model="pos.quantity" number-format decimals=0>
                        </td>
                        <td>
                            <button class="btn-xs btn-default" ng-click="remove($index)">
                                <span class="glyphicon glyphicon-remove"></span>
                                Remove
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
    
            <div>
                <button class="btn-sm btn-default" ng-click="add()">
                    <span class="glyphicon glyphicon-plus"></span>
                    Add Security
                </button>
                <button class="btn-sm btn-default" ng-click="run()">
                    <span class="glyphicon glyphicon-list-alt"></span>
                    Run Report
                </button>
            </div>
<!--
            <h6>
                Some crap explaining how to use the functionality
                will go here.
            </h6>
-->
        </div>
        <div class="col-sm-3"></div>
    </div>

    <div class="row">
        <br>
        <div class="col-sm-9" ng-show="visible">
            <table class="table agora-table table-striped table-condensed">
                <thead>
                    <tr>
                        <th></th>
                        <th class="orange">Current Portfolio</th>
                        <th class="orange">New Positions</th>
                        <th class="orange">Aggregated</th>
                    </tr>
                </thead>
                <tbody style="font-weight: bold;">
                    <tr ng-repeat="metric in report.metrics">
                        <td>{{metric}}</td>
                        <td>{{100.0 * report.curr[metric] / fund.aum | number: 2}}%</td>
                        <td>{{100.0 * report.new[metric] / fund.aum | number: 2}}%</td>
                        <td>{{100.0 * report.agg[metric] / fund.aum | number: 2}}%</td>
                    </tr>
                </tbody>
            </table>

            <table class="table agora-table table-striped table-condensed">
                <thead>
                    <tr>
                        <th></th>
                        <th class="orange">Security</th>
                        <th class="orange">Position</th>
                        <th class="orange">Exposure ({{fund.ccy}})</th>
                        <th class="orange">Pct. of AUM</th>
                        <th class="orange">Avg.Volume</th>
                        <th class="orange">Beta</th>
                        <th class="orange">Bbg. Beta</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="font-weight: bold;"
                        ng-repeat="pos in report.positions">
                        <td style="color: #99CCFF;">{{$index + 1}}</td>
                        <td>{{pos.ticker}}</td>
                        <td ng-class="colorByPos(pos.units)">
                            {{pos.units | number: 0}}
                        </td>
                        <td ng-class="colorByPos(pos.units)">
                            {{pos.exposure | number: 0}}
                        </td>
                        <td ng-class="[colorByPos(pos.units), validateWeight(pos.exposure / fund.aum)]">
                            {{100.0 * pos.exposure / fund.aum | number: 2}}%
                        </td>
                        <td ng-class="validateDays(pos.days)">
                            {{pos.days | number: 2}} days
                        </td>
                        <td>{{pos.beta | number: 3}}</td>
                        <td>{{pos.bbg_beta | number: 3}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col-sm-9" ng-show="is_error">
            <pre>{{error_message}}</pre>
        </div>
    </div>
</div>