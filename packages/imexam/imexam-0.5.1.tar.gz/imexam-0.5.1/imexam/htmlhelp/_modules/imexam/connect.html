<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>imexam.connect &mdash; imexam v0.5</title>
    
    <link rel="stylesheet" href="../../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../../_static/astropy_logo.ico"/>
    <link rel="top" title="imexam v0.5" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="../../_static/copybutton.js"></script>


  </head>
  <body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../../index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li>
	<a href="../../index.html">imexam v0.5</a>
	 &raquo;
      </li>
      <li><a href="../index.html" accesskey="U">Module code</a> &raquo;</li>
      
       
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for imexam.connect</h1><div class="highlight"><pre>
<span class="c"># Licensed under a 3-clause BSD style license - see LICENSE.rst</span>

<span class="sd">&quot;&quot;&quot; This is the main controlling class, it allows the user to connect to (at least) ds9 and the imexamine classes &quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">absolute_import</span>

<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">os</span>


<span class="kn">from</span> <span class="nn">.util</span> <span class="kn">import</span> <span class="n">set_logging</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">xpa</span>
<span class="kn">from</span> <span class="nn">.ds9_viewer</span> <span class="kn">import</span> <span class="n">ds9</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">.ginga_viewer</span> <span class="kn">import</span> <span class="n">ginga_mp</span>
    <span class="n">have_ginga</span> <span class="o">=</span> <span class="bp">True</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">have_ginga</span> <span class="o">=</span> <span class="bp">False</span>


<span class="kn">from</span> <span class="nn">.imexamine</span> <span class="kn">import</span> <span class="n">Imexamine</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Connect&quot;</span><span class="p">]</span>


<div class="viewcode-block" id="Connect"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect">[docs]</a><span class="k">class</span> <span class="nc">Connect</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; Connect to a display device to look at and examine images that are displayed within</span>

<span class="sd">    The control features below are a basic set that should be available in all display tools.</span>
<span class="sd">    The class for the display tool should override them and add it&#39;s own extra features.</span>


<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>

<span class="sd">    target: string, optional</span>
<span class="sd">        the viewer target name or id (default is to start a new instance of a DS9 window)</span>

<span class="sd">    path : string, optional</span>
<span class="sd">        absolute path to the viewers executable</span>

<span class="sd">    viewer: string, optional</span>
<span class="sd">        The name of the image viewer you want to use, currently only DS9 is supported</span>

<span class="sd">    wait_time: int, optional</span>
<span class="sd">        The time to wait for a connection to be eastablished before quitting</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>

<span class="sd">    window: a pointer to an object</span>
<span class="sd">        controls the viewers functions</span>

<span class="sd">    imexam: a pointer to an object</span>
<span class="sd">        controls the imexamine functions and options</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">viewer</span><span class="o">=</span><span class="s">&quot;ds9&quot;</span><span class="p">,</span>
                 <span class="n">wait_time</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">quit_window</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>

        <span class="c"># better dynamic way so people can add their own viewers?</span>
        <span class="n">_possible_viewers</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;ds9&quot;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_viewer</span> <span class="o">=</span> <span class="n">viewer</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">have_ginga</span><span class="p">:</span>
            <span class="n">_possible_viewers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;ginga_mp&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_viewer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_possible_viewers</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&quot;**Unsupported viewer**</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span>

        <span class="c"># init sets empty data array until we can load or check viewer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exam</span> <span class="o">=</span> <span class="n">Imexamine</span><span class="p">()</span>

        <span class="k">if</span> <span class="s">&#39;ds9&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_viewer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">window</span> <span class="o">=</span> <span class="n">ds9</span><span class="p">(</span>
                <span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">wait_time</span><span class="o">=</span><span class="n">wait_time</span><span class="p">,</span> <span class="n">quit_ds9_on_del</span><span class="o">=</span><span class="n">quit_window</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_event_driven_exam</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c"># use the imexam loop</span>

        <span class="k">elif</span> <span class="s">&#39;ginga_mp&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_viewer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">window</span> <span class="o">=</span> <span class="n">ginga_mp</span><span class="p">(</span><span class="n">exam</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="p">,</span>
                                   <span class="n">close_on_del</span><span class="o">=</span><span class="n">quit_window</span><span class="p">)</span>
            <span class="c"># self.window.view.add_callback(&#39;key-press&#39;,self.window._imexam)</span>
            <span class="c"># rotate canvas in before this can be used</span>
            <span class="c"># self.window.canvas.add_callback(&#39;key-press&#39;,self.start_imexam_ginga)</span>
            <span class="c"># the viewer will track imexam with callbacks</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_event_driven_exam</span> <span class="o">=</span> <span class="bp">True</span>

            <span class="c"># alter the exam.imexam_option_funcs{} here through the viewer code if you want to</span>
            <span class="c"># change key+function associations</span>
            <span class="c"># self.window._reassign_keys(imexam_dict)</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">logfile</span> <span class="o">=</span> <span class="s">&#39;imexam_log.txt&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="bp">None</span>  <span class="c"># points to the package logger</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_slice</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_frame</span> <span class="o">=</span> <span class="bp">None</span>

<div class="viewcode-block" id="Connect.setlog"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.setlog">[docs]</a>    <span class="k">def</span> <span class="nf">setlog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;turn on and off imexam logging to the a file&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logfile</span> <span class="o">=</span> <span class="n">filename</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">set_logging</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logfile</span><span class="p">,</span> <span class="n">on</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.close"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; close the window and end connection&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Connect.imexam"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.imexam">[docs]</a>    <span class="k">def</span> <span class="nf">imexam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;run imexamine with user interaction. At a minimum it requires a copy of the data array&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid_data_in_viewer</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event_driven_exam</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_run_event_imexam</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_run_imexam</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&quot;No valid image loaded in viewer&quot;</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_run_event_imexam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; let the viewer run an event driven imexam</span>

<span class="sd">        pass the key binding dictionary in for it to attach to?</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event_driven_exam</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&quot;Event driven imexam not implemented for viewer&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">print_options</span><span class="p">()</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Press the i key in the graphics window for access to imexam keys, i or q again to exit</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="Connect.get_data_filename"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.get_data_filename">[docs]</a>    <span class="k">def</span> <span class="nf">get_data_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;return the filename for the data in the current window&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">get_filename</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Connect.valid_data_in_viewer"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.valid_data_in_viewer">[docs]</a>    <span class="k">def</span> <span class="nf">valid_data_in_viewer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;return True if a valid file or array is loaded in the current viewing frame&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">valid_data_in_viewer</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Connect.get_frame_info"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.get_frame_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_frame_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;return more explicit information about the data displayed in the current frame&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">get_frame_info</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Connect.get_viewer_info"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.get_viewer_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_viewer_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a dictionary which has information about all frames loaded with data&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">get_viewer_info</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_run_imexam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;start imexam analysis loop for non event driven viewers</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The data displayed in the current frame is grabbed .The catch is that the user can change the data</span>
<span class="sd">        that is displayed using the gui menus in DS9, so during the imexam loop the display needs to be</span>
<span class="sd">        checked after each key stroke.</span>

<span class="sd">        This function will track the user changing the frame number using the gui display</span>
<span class="sd">        for  images and update the data array.</span>

<span class="sd">        TODO</span>
<span class="sd">        ds9 returns 1-based, figure out how to deal with this better so that other viewers can be implemented,</span>
<span class="sd">        the problem comes with  printing the coordinates and visual comparison with what&#39;s displayed</span>
<span class="sd">        in the gui. The gui display seems to round up integer pixels at some zoom factors. Verify this to some level</span>
<span class="sd">        by looking at the pixel returned and using the pixel table window in DS9 to look at surrounding values.</span>
<span class="sd">        imexamine() returns the value at the integer pixel location.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Press &#39;q&#39; to quit</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">get_options</span><span class="p">()</span>  <span class="c"># possible commands</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">print_options</span><span class="p">()</span>
        <span class="n">cstring</span> <span class="o">=</span> <span class="s">&quot;Current image {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_data_filename</span><span class="p">(),)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">cstring</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">cstring</span><span class="p">)</span>

        <span class="c"># set defaults</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">iscube</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_current_slice</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">get_slice_info</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">get_data</span><span class="p">())</span>
        <span class="n">current_key</span> <span class="o">=</span> <span class="n">keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c"># q is not in the list of keys</span>

        <span class="k">while</span> <span class="n">current_key</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_frame</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">iscube</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_check_slice</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">current_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readcursor</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_check_frame</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">iscube</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_check_slice</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">current_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">keys</span> <span class="ow">and</span> <span class="s">&#39;q&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">current_key</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Invalid key&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s">&#39;q&#39;</span> <span class="ow">in</span> <span class="n">current_key</span><span class="p">:</span>
                        <span class="n">current_key</span> <span class="o">=</span> <span class="bp">None</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">do_option</span><span class="p">(</span>
                            <span class="n">x</span> <span class="o">-</span>
                            <span class="mi">1</span><span class="p">,</span>
                            <span class="n">y</span> <span class="o">-</span>
                            <span class="mi">1</span><span class="p">,</span>
                            <span class="n">current_key</span><span class="p">)</span>  <span class="c"># ds9 returns 1 based array</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span>
                    <span class="s">&quot;Invalid key, use</span><span class="se">\n</span><span class="s">: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">print_options</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">_check_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;check if the user switched frames&quot;&quot;&quot;</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_frame</span> <span class="o">!=</span> <span class="n">frame</span><span class="p">:</span>  <span class="c"># the user has changed window frames</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">get_data</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_current_frame</span> <span class="o">=</span> <span class="n">frame</span>
            <span class="n">cstring</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Current image {0:s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_frame_info</span><span class="p">()[</span><span class="s">&#39;filename&#39;</span><span class="p">],)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">cstring</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">cstring</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_check_slice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; check if the user switched slice images &quot;&quot;&quot;</span>
        <span class="n">this_slice</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">get_slice_info</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_slice</span> <span class="o">!=</span> <span class="n">this_slice</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">get_data</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_current_slice</span> <span class="o">=</span> <span class="n">this_slice</span>
            <span class="n">cstring</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Current slice {0:s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_frame_info</span><span class="p">()[</span><span class="s">&#39;naxis&#39;</span><span class="p">],)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">cstring</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">cstring</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;Implement the following functions in your viewer class&quot;&quot;&quot;</span>

<div class="viewcode-block" id="Connect.readcursor"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.readcursor">[docs]</a>    <span class="k">def</span> <span class="nf">readcursor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns image coordinate postion and key pressed, in the form of x,y,str with 0arrar offset&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">readcursor</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Connect.alignwcs"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.alignwcs">[docs]</a>    <span class="k">def</span> <span class="nf">alignwcs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;align frames with wcs&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">alignwcs</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.blink"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.blink">[docs]</a>    <span class="k">def</span> <span class="nf">blink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">blink</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.clear_contour"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.clear_contour">[docs]</a>    <span class="k">def</span> <span class="nf">clear_contour</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">clear_contour</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Connect.cmap"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.cmap">[docs]</a>    <span class="k">def</span> <span class="nf">cmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the color map table to something else, in a defined list of options&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">cmap</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.colorbar"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.colorbar">[docs]</a>    <span class="k">def</span> <span class="nf">colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;turn the colorbar on the screen on and off&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.contour"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.contour">[docs]</a>    <span class="k">def</span> <span class="nf">contour</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;show contours on the window&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.contour_load"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.contour_load">[docs]</a>    <span class="k">def</span> <span class="nf">contour_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;load contours from a file&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">contour_load</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.crosshair"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.crosshair">[docs]</a>    <span class="k">def</span> <span class="nf">crosshair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Control the current position of the crosshair in the current frame, crosshair mode is turned on&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">crosshair</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.cursor"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.cursor">[docs]</a>    <span class="k">def</span> <span class="nf">cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;move the cursor in the current frame to the specified image pixel, it will also move selected regions&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.disp_header"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.disp_header">[docs]</a>    <span class="k">def</span> <span class="nf">disp_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Display the header of the current image to a window&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">disp_header</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Connect.frame"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.frame">[docs]</a>    <span class="k">def</span> <span class="nf">frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; move to a frame &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.get_data"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.get_data">[docs]</a>    <span class="k">def</span> <span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; return a numpy array of the data in the current window&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Connect.get_header"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.get_header">[docs]</a>    <span class="k">def</span> <span class="nf">get_header</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;return the current fits header as a string, or None if there&#39;s a problem&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">get_header</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Connect.grid"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.grid">[docs]</a>    <span class="k">def</span> <span class="nf">grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;convenience to turn the grid on and off, grid can be flushed with many more options&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.hideme"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.hideme">[docs]</a>    <span class="k">def</span> <span class="nf">hideme</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;lower the display window&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">hideme</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Connect.load_fits"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.load_fits">[docs]</a>    <span class="k">def</span> <span class="nf">load_fits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;convenience function to load fits image to current frame&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">load_fits</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.load_region"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.load_region">[docs]</a>    <span class="k">def</span> <span class="nf">load_region</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load regions from a file which uses ds9 standard formatting&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">load_region</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.load_mef_as_cube"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.load_mef_as_cube">[docs]</a>    <span class="k">def</span> <span class="nf">load_mef_as_cube</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load a Mult-Extension-Fits image one frame as a cube&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">load_mef_as_cube</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.load_mef_as_multi"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.load_mef_as_multi">[docs]</a>    <span class="k">def</span> <span class="nf">load_mef_as_multi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load a Mult-Extension-Fits image into multiple frames&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">load_mef_as_multi</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.make_region"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.make_region">[docs]</a>    <span class="k">def</span> <span class="nf">make_region</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;make an input reg file with  [x,y,comment] to a DS9 reg file, the input file should contains lines with x,y,comment&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">make_region</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.mark_region_from_array"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.mark_region_from_array">[docs]</a>    <span class="k">def</span> <span class="nf">mark_region_from_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;mark regions on the viewer with a list of tuples as input&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">mark_region_from_array</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.match"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;match all other frames to the current frame&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.nancolor"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.nancolor">[docs]</a>    <span class="k">def</span> <span class="nf">nancolor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;set the not-a-number color, default is red&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">nancolor</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.panto_image"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.panto_image">[docs]</a>    <span class="k">def</span> <span class="nf">panto_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;convenience function to change to x,y images coordinates using ra,dec</span>
<span class="sd">           x, y in image coord&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">panto_image</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.panto_wcs"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.panto_wcs">[docs]</a>    <span class="k">def</span> <span class="nf">panto_wcs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;pan to wcs coordinates in image&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">panto_wcs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.load_rgb"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.load_rgb">[docs]</a>    <span class="k">def</span> <span class="nf">load_rgb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;load three images into a frame, each one for a different color&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">load_rgb</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.rotate"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.rotate">[docs]</a>    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;rotate the current frame (in degrees)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.save_rgb"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.save_rgb">[docs]</a>    <span class="k">def</span> <span class="nf">save_rgb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;save an rgb image frame that is displayed as an MEF fits file&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">save_rgb</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.save_header"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.save_header">[docs]</a>    <span class="k">def</span> <span class="nf">save_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;save the header of the current image to a file&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">save_header</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.save_regions"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.save_regions">[docs]</a>    <span class="k">def</span> <span class="nf">save_regions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;save the regions on the current window to a file&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">save_regions</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.scale"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.scale">[docs]</a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Scale the image on display.The default zscale is the most widely used option&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.set_region"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.set_region">[docs]</a>    <span class="k">def</span> <span class="nf">set_region</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;display a region using the specifications in region_string&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">set_region</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.showme"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.showme">[docs]</a>    <span class="k">def</span> <span class="nf">showme</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;raise the display window&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">showme</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Connect.showpix"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.showpix">[docs]</a>    <span class="k">def</span> <span class="nf">showpix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;display the pixel value table, close window when done&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">showpix</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.show_window_commands"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.show_window_commands">[docs]</a>    <span class="k">def</span> <span class="nf">show_window_commands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;print the available commands for the selected display application&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">show_commands</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Connect.snapsave"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.snapsave">[docs]</a>    <span class="k">def</span> <span class="nf">snapsave</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;create a snap shot of the current window and save in specified format. If no format is specified the filename extension is used &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">snapsave</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.view"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.view">[docs]</a>    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Display numpy image array &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.zoom"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.zoom">[docs]</a>    <span class="k">def</span> <span class="nf">zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;zoom to parameter which can be any recognized string&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">zoom</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.zoomtofit"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.zoomtofit">[docs]</a>    <span class="k">def</span> <span class="nf">zoomtofit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;zoom the image to fit the display&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">zoomtofit</span><span class="p">()</span>
</div>
    <span class="sd">&quot;&quot;&quot; These are imexam parameters that the user can change for plotting  &quot;&quot;&quot;</span>

    <span class="c"># seems easiest to return the parameter dictionaries here, then the user can catch it, edit it</span>
    <span class="c"># and reset the pars with self.set in the exam link or directly into the</span>
    <span class="c"># imexamine object.</span>

<div class="viewcode-block" id="Connect.aimexam"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.aimexam">[docs]</a>    <span class="k">def</span> <span class="nf">aimexam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;show current parameters for aperture photometry&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">aperphot_pars</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.cimexam"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.cimexam">[docs]</a>    <span class="k">def</span> <span class="nf">cimexam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;show current parameters for column plots&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">colplot_pars</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.eimexam"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.eimexam">[docs]</a>    <span class="k">def</span> <span class="nf">eimexam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;show current parameters for contour plots&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">contour_pars</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.himexam"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.himexam">[docs]</a>    <span class="k">def</span> <span class="nf">himexam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;show current parameters for histogram plots&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">histogram_pars</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.jimexam"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.jimexam">[docs]</a>    <span class="k">def</span> <span class="nf">jimexam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;show current parameters for 1D fit line plots&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">line_fit_pars</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.kimexam"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.kimexam">[docs]</a>    <span class="k">def</span> <span class="nf">kimexam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;show current parameters for 1D fit column plots&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">column_fit_pars</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.limexam"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.limexam">[docs]</a>    <span class="k">def</span> <span class="nf">limexam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;show current parameters for  line plots&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">lineplot_pars</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.mimexam"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.mimexam">[docs]</a>    <span class="k">def</span> <span class="nf">mimexam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;show the current parameters for statistical regions&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">report_stat_pars</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.rimexam"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.rimexam">[docs]</a>    <span class="k">def</span> <span class="nf">rimexam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;show current parameters for curve of growth plots&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">curve_of_growth_pars</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.wimexam"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.wimexam">[docs]</a>    <span class="k">def</span> <span class="nf">wimexam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;show current parameters for surface plots&quot;&quot;&quot;</span>
        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">surface_pars</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Connect.unlearn"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.unlearn">[docs]</a>    <span class="k">def</span> <span class="nf">unlearn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unlearn all the imexam parameters and reset to default&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">unlearn_all</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="Connect.plotname"><a class="viewcode-back" href="../../api/imexam.connect.Connect.html#imexam.connect.Connect.plotname">[docs]</a>    <span class="k">def</span> <span class="nf">plotname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;change or show the default save plotname for imexamine&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">get_plot_name</span><span class="p">()</span>  <span class="c"># show the current default</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">access</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">F_OK</span><span class="p">):</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s">&quot;File with that name already exists:{0s}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">exam</span><span class="o">.</span><span class="n">set_plot_name</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right"> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2015, Megan Sosey.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2. &nbsp;
    Last built 01 May 2015. <br/>
  </p>
</footer>
  </body>
</html>