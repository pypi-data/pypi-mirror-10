#!/usr/bin/python3
#
#

""" KONING - 24x7 support VOOR de crisis !!! """

__copyright__ = "Copyright 2015, B.H.J Thate"

## ENVIRONMENT

import os, sys, time

os.environ["PYTHONPATH"] = "."

tz = os.environ.get("TZ", None)
if not tz: os.environ["TZ"] = "Europe/Amsterdam"
time.tzset()

sys.path.insert(0, os.path.abspath(os.curdir))
sys.path.insert(0, ".local")

## IMPORTS

from core.kernel import kernel, cfg, plugs
from core.plugs import Plugs
from core.bots.cli import CLI
from core.thing import Thing
from core.log import init


import readline
import time
import sys
import os

## MAIN

def main():
    from koning import __version__
    kernel.boot("KONING", shell=True, version=__version__, workdir=os.path.expanduser("~/koning.data"))
    plugs.load("koning")
    try: plugs.load("minister")
    except: pass
    try: plugs.load("gemeente")
    except: pass
    try: plugs.load("huisarts")
    except: pass
    plugs.init(cfg.init)
    bot = CLI()
    bot.start()

if __name__ == "__main__": 
    try: main()
    except (EOFError, KeyboardInterrupt): pass
    kernel.shutdown()
    os._exit(0)
